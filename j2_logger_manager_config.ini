; =======================
; j2 / spdlog 설정 파일
; =======================
; 리로드 구분 안내
; - [soft-reload] : 재시작 없이 즉시 반영(레벨/패턴/시간/flush_on/주기적 플러시 등)
; - [hard-reload] : sink 재생성 필요(on/off, 경로, 회전 용량/백업 개수)
; - [init-only]   : 최초 초기화에서만 읽음(AUTO_RELOAD_SEC)
;
; 하드 리로드 주의
; - 파일 경로 변경 시 새 파일로 즉시 전환(기존 파일 보존), 권한/네트워크 경로 주의
; - 회전 용량/백업 개수 축소는 즉시 파일을 줄이지 않으며 다음 회전부터 적용
; - 매우 큰 용량(GB~TB)은 64비트 권장, 파일시스템 한계·ulimit에 유의

[Log]

; ===== 초기 1회만 읽는 항목 [init-only] =====
; 자동 재로딩 스레드 주기(초). soft/hard 리로드 모두 동일 주기로 감지. 런타임 변경 불가.
AUTO_RELOAD_SEC=60

; ===== 하드 리로드 항목들 [hard-reload] =====
ENABLE_CONSOLE_LOG=true
ENABLE_FILE_LOG_ALL=true
ENABLE_FILE_LOG_ALERTS=true

; 파일 경로
ALL_PATH=logs/all.log
ALERTS_PATH=logs/alerts.log

; 회전 정책
; 예시> 일반 로그 최대 500MB = 100MB * 5개
ALL_MAX_SIZE=100MB
ALL_MAX_FILES=5
; 예시> 경고 로그 최대 약 1GB = 100MB * 10개
ALERT_MAX_SIZE=100MB
ALERT_MAX_FILES=10

; ===== 즉시 반영 [soft-reload] =====
; 시간 모드: local | utc
TIME_MODE=local

; 최소 레벨(이상)
; 사용 가능한 레벨:
;   trace     = 가장 상세한 진단용 로그
;   debug     = 개발/디버깅용 상세 로그
;   info      = 일반 정보
;   warn      = 주의/경고(이상 징후)
;   error     = 오류(기능 실패)
;   critical  = 치명적 오류(서비스 중단 위험)
;   off       = 출력 끔
CONSOLE_LEVEL=trace
ALL_FILE_LEVEL=trace
ALERTS_FILE_LEVEL=warn
LOGGER_LEVEL=trace
FLUSH_ON_LEVEL=warn

; 주기적 플러시(초). 0이면 비활성화 권장(런타임 완전 비활성화는 제한적)
FLUSH_EVERY_SEC=1

; 패턴
; 패턴 자리표시자 설명(일부):
;   %Y=연도(4자리)  %m=월(00-12)  %d=일(00-31)
;   %H=시(00-23)    %M=분(00-59)  %S=초(00-59)
;   %e=밀리초(000-999)
;   %l=레벨 문자열(trace/debug/info/warn/error/critical)
;   %t=스레드 ID     %v=로그 메시지
;   %^=색상 시작(콘솔 컬러링)   %$=색상 종료
; 시간대는 TIME_MODE 설정에 따릅니다(local/utc).
PATTERN_CONSOLE=[%Y-%m-%d %H:%M:%S.%e] [%^%l%$] [%t] %v
PATTERN_FILE=[%Y-%m-%d %H:%M:%S.%e] [%l] [%t] %v

; ===== 디스크 감시(단일 디스크 기준) [soft-reload] =====
; 1) 감시할 디스크(또는 마운트/드라이브) 상의 경로를 지정합니다. 예) /hello   또는   C:\hello
DISK_ROOT=/hello
; 2) 해당 디스크의 잔여 비율(%)이 아래 임계값 미만이면, 파일 로깅을 전부 중지하고 콘솔만 출력합니다.
DISK_MIN_FREE_RATIO=5
; 3) 파일 로깅이 중지된 동안, UDP로 아래 IP/Port에 주기적으로 알림을 보냅니다.
;    UDP_ALERT_MESSAGE 플레이스홀더:
;      {path}        = DISK_ROOT 경로
;      {avail_bytes} = 사용 가능 바이트 수
;      {ratio}       = 남은 비율(소수 둘째 자리까지)
UDP_ALERT_IP=127.0.0.1
UDP_ALERT_PORT=10514
UDP_ALERT_INTERVAL_SEC=60
UDP_ALERT_MESSAGE=DISK LOW: path={path} free={avail_bytes}B ({ratio}%)

